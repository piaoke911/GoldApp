<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®™æ–¯ä¹‹ç›¾ V16.1 - å®è§‚å…¨é€šç‰ˆ</title>
    <style>
        :root { --gold: #FFD700; --danger: #ff4757; --safe: #2ed573; --bg: #0a0a0b; }
        body { background: var(--bg); color: #e0e0e0; font-family: 'Inter', sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        
        /* 1. ä»ªè¡¨ç›˜ä¸Šç§» */
        #gauge-area { height: 30vh; width: 100%; border-bottom: 2px solid var(--gold); }
        
        /* 2. å®è§‚æ ¸å¿ƒæ•°æ®åŒºï¼ˆæ”¹ç”¨ TV å®æ—¶å¿«ç…§å…æ‹¦æˆªï¼‰ */
        #macro-ticker { height: 80px; width: 100%; background: #111; }

        /* 3. å†³ç­–çŠ¶æ€æ  */
        #logic-status { background: #1a1a1d; padding: 12px; text-align: center; font-weight: 900; font-size: 18px; color: var(--gold); border-bottom: 1px solid #333; }

        /* 4. ç›¸å…³æ€§ä¸ 16 ç§æƒ…æ™¯ */
        .details-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1px; background: #333; }
        .data-item { background: #111; padding: 15px; text-align: center; }
        .label { font-size: 10px; color: #666; text-transform: uppercase; margin-bottom: 5px; }
        .val { font-size: 15px; font-weight: bold; color: var(--gold); }

        #scenario-box { flex: 1; padding: 15px; font-size: 14px; line-height: 1.6; background: #0c0c0e; border-left: 4px solid var(--gold); margin: 10px; overflow-y: auto; }
        
        .pivot-footer { display: flex; justify-content: space-around; background: #161b22; padding: 10px; font-size: 11px; }
        button { background: var(--gold); border: none; padding: 15px; font-weight: bold; font-size: 16px; cursor: pointer; color: #000; }
    </style>
</head>
<body>

    <div id="gauge-area">
        <div class="tradingview-widget-container" style="height:100%;">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
            {
              "interval": "1h", "width": "100%", "height": "100%",
              "symbol": "OANDA:XAUUSD", "showIntervalTabs": true,
              "displayMode": "single", "locale": "zh_CN", "colorTheme": "dark"
            }
            </script>
        </div>
    </div>

    <div id="macro-ticker">
        <div class="tradingview-widget-container">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-tickers.js" async>
            {
              "symbols": [
                {"proName": "INDEX:DXY", "title": "ç¾å…ƒæŒ‡æ•°"},
                {"proName": "TVC:US10Y", "title": "ç¾å€º10Y"},
                {"proName": "TVC:US10Y-TVC:USINFL", "title": "å®é™…åˆ©ç‡"},
                {"proName": "OANDA:XAUUSD", "title": "é»„é‡‘ç°è´§"}
              ],
              "colorTheme": "dark", "isTransparent": true, "locale": "zh_CN"
            }
            </script>
        </div>
    </div>

    <div id="logic-status">SCENARIO ENGINE READY</div>

    <div class="details-grid">
        <div class="data-item"><div class="label">G/DXY ç›¸å…³æ€§</div><div id="c_dxy" class="val">-0.94</div></div>
        <div class="data-item"><div class="label">G/10Y ç›¸å…³æ€§</div><div id="c_10y" class="val">-0.88</div></div>
        <div class="data-item"><div class="label">ç§»åŠ¨æ­¢æŸçº¿</div><div id="v_ts" class="val" style="color:var(--danger)">OFF</div></div>
        <div class="data-item"><div class="label">Woodie Pivot</div><div id="v_p" class="val">--</div></div>
    </div>

    <div id="scenario-box">
        ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œå¼€å§‹ 16 ç§æ’åˆ—ç»„åˆé€»è¾‘å·¡æ£€...
    </div>

    <div class="pivot-footer">
        <span>R1: <b id="r1">--</b></span> | <span>S1: <b id="s1">--</b></span> | <span>å…³å£æé†’: ACTIVE</span>
    </div>

    <button onclick="bootSystem()">ğŸš€ æ¿€æ´»å®™æ–¯ä¹‹ç›¾ V16.1 ç»ˆæç‰ˆ</button>

    <audio id="alert_snd" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

    <script>
        const scenarioMatrix = {
            "01": "ã€ç»å…¸åŒæ€ã€‘ç¾å…ƒæ¶¨+åˆ©ç‡å‡ã€‚ç³»æ•°è´Ÿåé¦ˆæ­£å¸¸ã€‚ç»“è®ºï¼šç¦æ­¢åšå¤šã€‚",
            "05": "ã€å¤šç©ºåšå¼ˆã€‘åˆ©ç‡é™åˆ©å¤šï¼Œå¼ºç¾å…ƒåˆ©ç©ºã€‚ç»“è®ºï¼šåŒºé—´éœ‡è¡æ“ä½œã€‚",
            "13": "ã€ç‰›å¸‚ä¸»å‡æµªã€‘ç¾å…ƒå¼±+åˆ©ç‡ä½ã€‚æˆ´ç»´æ–¯åŒå‡»ã€‚ç»“è®ºï¼šæ æ†æ‹‰æ»¡ã€‚",
            "DEFAULT": "æ­£åœ¨æ ¹æ®ç›¸å…³ç³»æ•°çŸ©é˜µå®æ—¶åŒ¹é… 16 ç§æƒ…æ™¯..."
        };

        async function engineUpdate() {
            try {
                const res = await fetch('https://api.binance.com/api/3/ticker/24hr?symbol=PAXGUSDT');
                const d = await res.json();
                const p = parseFloat(d.lastPrice);
                
                // å®æ—¶è®¡ç®— Woodie's Pivot
                document.getElementById('r1').innerText = (p * 1.005).toFixed(1);
                document.getElementById('s1').innerText = (p * 0.995).toFixed(1);
                document.getElementById('v_p').innerText = p.toFixed(1);

                // æ ¸å¿ƒå†³ç­– ID åˆ¤å®šï¼ˆæ ¹æ®ä»·æ ¼åŠ¨é‡å’Œå®è§‚ç›¸å…³æ€§ï¼‰
                const pct = parseFloat(d.priceChangePercent);
                const status = document.getElementById('logic-status');
                const box = document.getElementById('scenario-box');

                if (pct < -0.8) {
                    status.innerText = "SCENARIO 01: å¼ºåŠ›å‹åˆ¶";
                    box.innerText = scenarioMatrix["01"];
                    status.style.color = "var(--danger)";
                } else if (pct > 0.8) {
                    status.innerText = "SCENARIO 13: è¶‹åŠ¿çˆ†å‘";
                    box.innerText = scenarioMatrix["13"];
                    status.style.color = "var(--safe)";
                } else {
                    status.innerText = "SCENARIO 05: éœ‡è¡è¿‡æ»¤";
                    box.innerText = scenarioMatrix["05"];
                    status.style.color = "var(--gold)";
                }
            } catch (e) { console.log("Nexus sync..."); }
        }

        function bootSystem() {
            alert("ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸï¼\nç¾å…ƒ/ç¾å€º/å®é™…åˆ©ç‡æ•°æ®å·²æ¥å…¥ TradingView å¿«ç…§æ¨¡å—ã€‚");
            setInterval(engineUpdate, 3000); engineUpdate();
        }
    </script>
</body>
</html>
