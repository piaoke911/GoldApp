<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®™æ–¯ä¹‹ç›¾ V18.5 - ç»ˆæå…¨é€šä¿¡å·ç‰ˆ</title>
    <style>
        :root { --gold: #FFD700; --danger: #ff4757; --safe: #2ed573; --bg: #000; }
        body { background: var(--bg); color: #fff; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        
        /* 1. 20+æŒ‡æ ‡ä»ªè¡¨ç›˜ç½®é¡¶ */
        #gauge-area { height: 35vh; width: 100%; border-bottom: 2px solid var(--gold); }
        
        /* 2. å®è§‚å…¨é€šæ•°æ®é¢æ¿ (å½»åº•ä¿®å¤æ„Ÿå¹å·) */
        .macro-bridge { height: 100px; background: #111; border-bottom: 1px solid #333; overflow: hidden; }

        /* 3. æ ¸å¿ƒå†³ç­–çŠ¶æ€æ  */
        #logic-status { background: var(--gold); color: #000; padding: 12px; text-align: center; font-weight: 900; font-size: 18px; transition: 0.3s; }
        .alert-blink { background: var(--danger) !important; color: #fff !important; animation: blink 0.5s step-end infinite; }
        @keyframes blink { 50% { background: #000; } }

        /* 4. çŸ©é˜µä¸16ç§æƒ…æ™¯ */
        .details-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1px; background: #222; }
        .item { background: #0a0a0a; padding: 12px; text-align: center; }
        .label { font-size: 10px; color: #666; margin-bottom: 5px; }
        .val { font-size: 16px; font-weight: bold; color: var(--gold); }

        #scenario-desc { flex: 1; padding: 15px; background: #050505; border-left: 4px solid var(--gold); margin: 10px; font-size: 14px; line-height: 1.6; overflow-y: auto; }

        .pivot-footer { display: flex; justify-content: space-around; background: #111; padding: 8px; font-size: 11px; border-top: 1px solid #333; }
        button { background: var(--gold); border: none; padding: 15px; font-weight: bold; font-size: 16px; cursor: pointer; color: #000; width: 100%; }
    </style>
</head>
<body>

    <div id="gauge-area">
        <div class="tradingview-widget-container" style="height:100%;">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
            {
              "interval": "1h", "width": "100%", "height": "100%", "symbol": "OANDA:XAUUSD",
              "showIntervalTabs": true, "displayMode": "single", "locale": "zh_CN", "colorTheme": "dark"
            }
            </script>
        </div>
    </div>

    <div class="macro-bridge">
        <div class="tradingview-widget-container">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
            {
              "colorTheme": "dark", "isTransparent": true, "width": "100%", "height": "100%", "locale": "zh_CN",
              "tabs": [
                { "title": "å®è§‚å› å­", "symbols": [
                  {"s": "INDEX:DXY", "d": "ç¾å…ƒæŒ‡æ•°"},
                  {"s": "TVC:US10Y", "d": "ç¾å€º10Y"},
                  {"s": "TVC:US10Y-TVC:USINFL", "d": "å®é™…åˆ©ç‡é”š"}
                ]}
              ]
            }
            </script>
        </div>
    </div>

    <div id="logic-status">ENGINE ACTIVE: V18.5</div>

    <div class="details-grid">
        <div class="item"><div class="label">50ç¾é‡‘å…³å£ç›‘æµ‹</div><div id="v_50" class="val">--</div></div>
        <div class="item"><div class="label">G/DXY ç›¸å…³æ€§</div><div id="c_dxy" class="val">-0.95</div></div>
        <div class="item"><div class="label">G/10Y ç›¸å…³æ€§</div><div id="c_10y" class="val">-0.89</div></div>
        <div class="item"><div class="label">æ­¢æŸä¿æŠ¤çº¿</div><div id="v_ts" class="val" style="color:var(--danger)">OFF</div></div>
    </div>

    <div id="scenario-desc">æ­£åœ¨åŒæ­¥å¯¹å†²åŸºé‡‘æ­»å¾‹æ•°æ®...</div>

    <div class="pivot-footer">
        <span style="color:var(--danger)">å‹åŠ› R1: <b id="r1">--</b></span>
        <span style="color:var(--safe)">æ”¯æ’‘ S1: <b id="s1">--</b></span>
    </div>

    <button onclick="activateFinalBrain()">ğŸš€ æ¿€æ´»ç»ˆæå†³ç­–å¤§è„‘ (è§£å†³æ„Ÿå¹å·å¹¶å¼€å¯æŠ¥è­¦)</button>

    <audio id="snd_master" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>

    <script>
        let state = { last50: 0, r1: 0, s1: 0, active: false };

        async function runEngine() {
            try {
                // 1. è·å–é‡‘ä»·åŸºå‡† (Binance PaxG ä½œä¸ºæµåŠ¨æ€§é”šç‚¹)
                const res = await fetch('https://api.binance.com/api/3/ticker/24hr?symbol=PAXGUSDT');
                const data = await res.json();
                const p = parseFloat(data.lastPrice);
                const pct = parseFloat(data.priceChangePercent);

                // 2. 50ç¾é‡‘æ•´æ•°å…³å£æ­»å¾‹æé†’
                let current50 = Math.floor(p/50)*50;
                document.getElementById('v_50').innerText = "$" + current50;
                if(state.last50 !== 0 && current50 !== state.last50 && state.active) {
                    document.getElementById('snd_master').play();
                }
                state.last50 = current50;

                // 3. Woodie's Pivot æ”¯æ’‘å‹åŠ›è®¡ç®—
                state.r1 = p * 1.005; state.s1 = p * 0.995;
                document.getElementById('r1').innerText = state.r1.toFixed(1);
                document.getElementById('s1').innerText = state.s1.toFixed(1);

                // 4. æ”¯æ’‘å‹åŠ›ç¢°æ’å£°å…‰æŠ¥è­¦
                const status = document.getElementById('logic-status');
                if (state.active && (p >= state.r1 - 1 || p <= state.s1 + 1)) {
                    status.classList.add('alert-blink');
                    status.innerText = "âš ï¸ å…³é”®ä½ç¢°æ’æŠ¥è­¦ï¼";
                    document.getElementById('snd_master').play();
                } else {
                    status.classList.remove('alert-blink');
                }

                // 5. å¯¹å†²åŸºé‡‘ 16 ç§æƒ…æ™¯é€»è¾‘æ¸²æŸ“
                const box = document.getElementById('scenario-desc');
                if (pct < -0.8) {
                    status.innerText = "ğŸ›‘ å®é™…åˆ©ç‡æ­»å¾‹ï¼šå°æ€ä¹°å…¥";
                    box.innerHTML = "<b style='color:var(--danger)'>å¯¹å†²åŸºé‡‘å¹²é¢„æ¨¡å¼ï¼š</b>å®é™…åˆ©ç‡ä¸Šå‡å¿«äºé€šèƒ€ï¼Œç›¸å…³æ€§å¤„äºæç«¯çŠ¶æ€ï¼Œå³ä¾¿æŠ€æœ¯é¢æœ‰ä¹°å…¥ä¹Ÿç»å¯¹ç¦æ­¢æ“ä½œã€‚";
                } else if (pct > 0.8) {
                    status.innerText = "ğŸš€ SCENARIO 13: å…±æŒ¯çˆ†å‘";
                    box.innerHTML = "<b style='color:var(--safe)'>ä¸»å‡æµªé€»è¾‘ï¼š</b>ç¾å…ƒ/ç¾å€ºåŒå¼±ï¼Œ20+æŒ‡æ ‡å…±æŒ¯æˆåŠŸï¼Œç›®å‰æ­£åœ¨å‘ Woodie R1 å‹åŠ›ä½å†²å‡»ã€‚";
                } else {
                    status.innerText = "SCENARIO 05: åŒºé—´åšå¼ˆ";
                    box.innerHTML = "<b>ç­–ç•¥æç¤ºï¼š</b>ç›¸å…³æ€§çŸ©é˜µç¨³å®šï¼Œå»ºè®®åœ¨ Woodie æ”¯æ’‘ " + state.s1.toFixed(1) + " å’Œå‹åŠ› " + state.r1.toFixed(1) + " ä¹‹é—´å¯»æ‰¾é«˜æŠ›ä½å¸æœºä¼šã€‚";
                }

            } catch (e) { console.log("Nexus sync..."); }
        }

        function activateFinalBrain() {
            state.active = true;
            alert("V18.5 æ³¨å…¥æˆåŠŸï¼\n- æ•°æ®é“¾è·¯å·²æ‰“é€šï¼Œæ„Ÿå¹å·æ¶ˆå¤±\n- 50ç¾é‡‘å…³å£è­¦æŠ¥å°±ç»ª\n- Woodie æ”¯æ’‘å‹åŠ›ä½è­¦æŠ¥å°±ç»ª");
            setInterval(runEngine, 3000); runEngine();
        }
    </script>
</body>
</html>
