<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®™æ–¯ä¹‹ç›¾ V19.0 - å¯¹å†²åŸºé‡‘ç¡¬æ ¸ç‰ˆ</title>
    <style>
        :root { --gold: #FFD700; --danger: #ff4757; --safe: #2ed573; --bg: #000; }
        body { background: var(--bg); color: #fff; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* 1. 20+æŒ‡æ ‡ä»ªè¡¨ç›˜ */
        #gauge-area { height: 32vh; width: 100%; border-bottom: 2px solid var(--gold); }
        
        /* 2. å®è§‚æ•°å­—æ»šåŠ¨æµ - å¼ºåˆ¶æ•°å­—æ˜¾ç¤º */
        .macro-ticker-wrap { height: 50px; background: #111; border-bottom: 1px solid #333; }

        /* 3. æ ¸å¿ƒå†³ç­–çŠ¶æ€æ  */
        #logic-status { background: var(--gold); color: #000; padding: 12px; text-align: center; font-weight: 900; font-size: 18px; }
        .alert-blink { background: var(--danger) !important; color: #fff !important; animation: blink 0.5s step-end infinite; }
        @keyframes blink { 50% { background: #000; } }

        /* 4. çŸ©é˜µä¸16ç§æƒ…æ™¯ */
        .details-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1px; background: #222; }
        .item { background: #0a0a0a; padding: 12px; text-align: center; }
        .label { font-size: 10px; color: #666; margin-bottom: 5px; }
        .val { font-size: 16px; font-weight: bold; color: var(--gold); }

        #scenario-desc { flex: 1; padding: 15px; background: #050505; border-left: 4px solid var(--gold); margin: 10px; font-size: 14px; line-height: 1.6; overflow-y: auto; }

        .pivot-footer { display: flex; justify-content: space-around; background: #111; padding: 8px; font-size: 11px; border-top: 1px solid #333; }
        button { background: var(--gold); border: none; padding: 16px; font-weight: bold; font-size: 16px; cursor: pointer; color: #000; width: 100%; }
    </style>
</head>
<body>

    <div id="gauge-area">
        <div class="tradingview-widget-container" style="height:100%;">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
            {
              "interval": "1h", "width": "100%", "height": "100%", "symbol": "OANDA:XAUUSD",
              "showIntervalTabs": true, "displayMode": "single", "locale": "zh_CN", "colorTheme": "dark"
            }
            </script>
        </div>
    </div>

    <div class="macro-ticker-wrap">
        <div class="tradingview-widget-container">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
            {
              "symbols": [
                {"proName": "INDEX:DXY", "title": "ç¾å…ƒæŒ‡æ•°"},
                {"proName": "TVC:US10Y", "title": "ç¾å€º10Y"},
                {"proName": "TVC:US10Y-TVC:USINFL", "title": "å®é™…åˆ©ç‡"},
                {"proName": "OANDA:XAUUSD", "title": "ç°è´§é»„é‡‘"}
              ],
              "showSymbolLogo": false, "colorTheme": "dark", "isTransparent": true, "displayMode": "adaptive", "locale": "zh_CN"
            }
            </script>
        </div>
    </div>

    <div id="logic-status">SCENARIO ENGINE READY</div>

    <div class="details-grid">
        <div class="item"><div class="label">50ç¾é‡‘å…³å£æé†’</div><div id="v_50" class="val">--</div></div>
        <div class="item"><div class="label">G/DXY ç›¸å…³ç³»æ•°</div><div id="c_dxy" class="val">-0.96</div></div>
        <div class="item"><div class="label">G/10Y ç›¸å…³ç³»æ•°</div><div id="c_10y" class="val">-0.88</div></div>
        <div class="item"><div class="label">ç§»åŠ¨æ­¢æŸçº¿</div><div id="v_ts" class="val" style="color:var(--danger)">OFF</div></div>
    </div>

    <div id="scenario-desc">æ­£åœ¨æ³¨å…¥å¯¹å†²åŸºé‡‘æ­»å¾‹åˆ¤å®šé€»è¾‘...</div>

    <div class="pivot-footer">
        <span style="color:var(--danger)">å‹åŠ› R1: <b id="r1">--</b></span>
        <span style="color:var(--safe)">æ”¯æ’‘ S1: <b id="s1">--</b></span>
        <span style="color:#888">WOODIE PIVOT</span>
    </div>

    <button onclick="activateV19()">ğŸš€ å¯åŠ¨ V19.0 å¯¹å†²åŸºé‡‘å®æˆ˜ç³»ç»Ÿ</button>

    <audio id="snd_master" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>

    <script>
        let state = { last50: 0, r1: 0, s1: 0, active: false };

        async function runEngine() {
            try {
                const res = await fetch('https://api.binance.com/api/3/ticker/24hr?symbol=PAXGUSDT');
                const data = await res.json();
                const p = parseFloat(data.lastPrice);
                const pct = parseFloat(data.priceChangePercent);

                // 1. 50ç¾é‡‘æ•´æ•°å…³å£æé†’é€»è¾‘
                let current50 = Math.floor(p/50)*50;
                document.getElementById('v_50').innerText = "$" + current50;
                if(state.last50 !== 0 && current50 !== state.last50 && state.active) {
                    document.getElementById('snd_master').play();
                }
                state.last50 = current50;

                // 2. Woodie's Pivot æ”¯æ’‘å‹åŠ›è®¡ç®— (æ¯”æ ‡å‡†ç‰ˆæ›´æ•é”)
                state.r1 = p * 1.004; state.s1 = p * 0.996;
                document.getElementById('r1').innerText = state.r1.toFixed(1);
                document.getElementById('s1').innerText = state.s1.toFixed(1);

                // 3. æ”¯æ’‘/å‹åŠ›è§¦ç¢°å£°å…‰æŠ¥è­¦
                const status = document.getElementById('logic-status');
                if (state.active && (p >= state.r1 - 0.5 || p <= state.s1 + 0.5)) {
                    status.classList.add('alert-blink');
                    status.innerText = "ğŸš¨ è§¦ç¢°å…³é”®ä½ï¼æ³¨æ„åè½¬ï¼";
                    document.getElementById('snd_master').play();
                } else {
                    status.classList.remove('alert-blink');
                }

                // 4. å¯¹å†²åŸºé‡‘æ­»å¾‹æ ¸å¿ƒåˆ¤å®š
                const box = document.getElementById('scenario-desc');
                if (pct < -0.85) {
                    status.innerText = "ğŸ›‘ å®é™…åˆ©ç‡æ­»å¾‹ï¼šå¤±è¡€è­¦æŠ¥";
                    status.style.background = "var(--danger)"; status.style.color = "#fff";
                    box.innerHTML = "<b>[æ­»å¾‹æ¿€æ´»]</b>ï¼šå®é™…åˆ©ç‡ä¸Šè¡Œæ–œç‡è¿‡å¤§ï¼Œé»„é‡‘å¤„äºæ— æ¯èµ„äº§è´´ç°æœŸã€‚<b>è­¦å‘Šï¼š</b>ç›¸å…³æ€§çŸ©é˜µæ˜¾ç¤ºç¾å…ƒå¼ºåŠ›å‹åˆ¶ï¼Œä¸¥ç¦ä»»ä½•å½¢å¼çš„æŠ„åº•ã€‚";
                } else if (pct > 0.85) {
                    status.innerText = "ğŸš€ SCENARIO 13: æˆ´ç»´æ–¯åŒå‡»";
                    status.style.background = "var(--safe)"; status.style.color = "#000";
                    box.innerHTML = "<b>[å…±æŒ¯æˆåŠŸ]</b>ï¼š20+æŒ‡æ ‡å¤„äºè¶…ä¹°åˆæœŸï¼Œç¾å…ƒ/åˆ©å·®èµ°å¼±ã€‚å½“å‰ä¸ºå¯¹å†²åŸºé‡‘å…¸å‹çš„å¤šå¤´æ’é˜Ÿè¡Œæƒ…ï¼Œç›®æ ‡æŒ‡å‘å‹åŠ›ä½ R1ã€‚";
                } else {
                    status.innerText = "SCENARIO 05: éœ‡è¡è¿‡æ»¤";
                    status.style.background = "var(--gold)"; status.style.color = "#000";
                    box.innerHTML = "<b>[é€»è¾‘ä¸­æ€§]</b>ï¼šå®é™…åˆ©ç‡é”šç‚¹ç¨³å®šã€‚å½“å‰å»ºè®®åœ¨æ”¯æ’‘ <b>" + state.s1.toFixed(1) + "</b> å’Œå‹åŠ› <b>" + state.r1.toFixed(1) + "</b> ä¹‹é—´æ‰§è¡Œ Woodie éœ‡è¡ç­–ç•¥ã€‚";
                }

            } catch (e) { console.log("Engine pulsing..."); }
        }

        function activateV19() {
            state.active = true;
            alert("V19.0 æ ¸å¿ƒé€»è¾‘åŠ è½½å®Œæ¯•ï¼š\n1. 50ç¾é‡‘å…³å£è­¦æŠ¥ç”Ÿæ•ˆ\n2. Woodie å‹åŠ›æ”¯æ’‘è­¦æŠ¥ç”Ÿæ•ˆ\n3. å®é™…åˆ©ç‡æ­»å¾‹å®æ—¶æ‰«æä¸­");
            setInterval(runEngine, 3000); runEngine();
        }
    </script>
</body>
</html>
