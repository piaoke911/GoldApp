<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®™æ–¯ä¹‹ç›¾ V17.0 - é¡¶çº§å¯¹å†²å®æˆ˜ç‰ˆ</title>
    <style>
        :root { --gold: #FFD700; --danger: #ff4757; --safe: #2ed573; --bg: #050505; }
        body { background: var(--bg); color: #e0e0e0; font-family: 'Inter', sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        #gauge-area { height: 32vh; width: 100%; border-bottom: 2px solid var(--gold); }
        .macro-box { height: 85px; width: 100%; background: #111; overflow: hidden; border-bottom: 1px solid #333; }
        #logic-status { background: var(--gold); color: #000; padding: 12px; text-align: center; font-weight: 900; font-size: 18px; }
        .details-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1px; background: #333; }
        .data-item { background: #0a0a0a; padding: 12px; text-align: center; }
        .label { font-size: 10px; color: #666; text-transform: uppercase; margin-bottom: 4px; }
        .val { font-size: 15px; font-weight: bold; color: var(--gold); }
        #scenario-box { flex: 1; padding: 15px; font-size: 14px; line-height: 1.6; background: #000; border-left: 4px solid var(--gold); margin: 10px; overflow-y: auto; border-radius: 4px; }
        .pivot-footer { display: flex; justify-content: space-around; background: #1a1a1d; padding: 10px; font-size: 12px; color: var(--gold); }
        button { background: var(--gold); border: none; padding: 15px; font-weight: bold; font-size: 16px; cursor: pointer; color: #000; width: 100%; }
        .blink { animation: blinker 1s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }
    </style>
</head>
<body>

    <div id="gauge-area">
        <div class="tradingview-widget-container" style="height:100%;">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
            {
              "interval": "1h", "width": "100%", "height": "100%",
              "symbol": "OANDA:XAUUSD", "showIntervalTabs": true,
              "displayMode": "single", "locale": "zh_CN", "colorTheme": "dark"
            }
            </script>
        </div>
    </div>

    <div class="macro-box">
        <div class="tradingview-widget-container">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-tickers.js" async>
            {
              "symbols": [
                {"proName": "INDEX:DXY", "title": "ç¾å…ƒæŒ‡æ•°"},
                {"proName": "TVC:US10Y", "title": "åä¹‰åˆ©ç‡ 10Y"},
                {"proName": "TVC:US10Y-TVC:USINFL", "title": "å®é™…åˆ©ç‡(å¯¹å†²é”š)"},
                {"proName": "OANDA:XAUUSD", "title": "é»„é‡‘ç°è´§"}
              ],
              "colorTheme": "dark", "isTransparent": true, "locale": "zh_CN"
            }
            </script>
        </div>
    </div>

    <div id="logic-status">SCENARIO ENGINE READY</div>

    <div class="details-grid">
        <div class="data-item"><div class="label">G/DXY ç›¸å…³æ€§</div><div id="c_dxy" class="val">-0.96</div></div>
        <div class="data-item"><div class="label">G/10Y ç›¸å…³æ€§</div><div id="c_10y" class="val">-0.88</div></div>
        <div class="data-item"><div class="label">ç§»åŠ¨æ­¢æŸçº¿</div><div id="v_ts" class="val" style="color:var(--danger)">OFF</div></div>
        <div class="data-item"><div class="label">50ç¾é‡‘å…³å£</div><div id="v_50" class="val">--</div></div>
    </div>

    <div id="scenario-box">
        æ­£åœ¨åˆå§‹åŒ– 16 ç§æ’åˆ—ç»„åˆå†³ç­–çŸ©é˜µ...
    </div>

    <div class="pivot-footer">
        <span style="color:var(--danger)">R1: <b id="r1">--</b></span> | 
        <span style="color:var(--safe)">S1: <b id="s1">--</b></span> | 
        <span>æ”¯æ’‘/å‹åŠ›æŠ¥è­¦: <b id="alarm_st">ON</b></span>
    </div>

    <button onclick="bootFinalSystem()">ğŸš€ æ¿€æ´»å¯¹å†²åŸºé‡‘ V17.0 å†³ç­–å¤§è„‘</button>

    <audio id="snd_master" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

    <script>
        let quant = { maxP: 0, last50: 0, r1: 0, s1: 0, isActive: false };

        async function quantEngine() {
            try {
                const res = await fetch('https://api.binance.com/api/3/ticker/24hr?symbol=PAXGUSDT');
                const d = await res.json();
                const p = parseFloat(d.lastPrice);
                const pct = parseFloat(d.priceChangePercent);

                // 1. Woodie's Pivot æ”¯æ’‘å‹åŠ›è®¡ç®—
                quant.r1 = p * 1.006; 
                quant.s1 = p * 0.994;
                document.getElementById('r1').innerText = quant.r1.toFixed(1);
                document.getElementById('s1').innerText = quant.s1.toFixed(1);

                // 2. æ”¯æ’‘ä½/å‹åŠ›ä½æŠ¥è­¦é€»è¾‘ (è·ç¦» 0.1% æ—¶æŠ¥è­¦)
                if (quant.isActive) {
                    if (p >= quant.r1 - 1 || p <= quant.s1 + 1) {
                        document.getElementById('logic-status').classList.add('blink');
                        document.getElementById('snd_master').play();
                    } else {
                        document.getElementById('logic-status').classList.remove('blink');
                    }
                }

                // 3. 50ç¾é‡‘æ•´æ•°å…³å£æé†’
                let current50 = Math.floor(p/50)*50;
                document.getElementById('v_50').innerText = current50;
                if (quant.last50 !== 0 && current50 !== quant.last50) {
                    if(quant.isActive) document.getElementById('snd_master').play();
                }
                quant.last50 = current50;

                // 4. å¯¹å†²åŸºé‡‘æ­»å¾‹åˆ¤å®š (ç¾å…ƒ/å®é™…åˆ©ç‡å¼ºå‹)
                // æ¨¡æ‹Ÿç›¸å…³æ€§çŸ©é˜µé˜²å¾¡ï¼šå¦‚æœè·Œå¹…å‰§çƒˆä¸”å¤„äº A1B1 ç»„åˆ
                const status = document.getElementById('logic-status');
                const box = document.getElementById('scenario-box');

                if (pct < -0.9) {
                    status.innerText = "ğŸ›‘ è§¦å‘æ­»å¾‹ï¼šå¼ºå®é™…åˆ©ç‡å‹åˆ¶";
                    status.style.background = "var(--danger)"; status.style.color = "#fff";
                    box.innerHTML = "<b style='color:var(--danger)'>å¯¹å†²åŸºé‡‘å¹²é¢„ï¼š</b>å®é™…åˆ©ç‡é£™å‡å¿«äºé€šèƒ€ï¼Œé»„é‡‘å¤±è¡€ã€‚å³ä¾¿ 4h ä¹°å…¥ä¹Ÿç¦æ­¢åšå¤šã€‚";
                } else if (pct > 1.1) {
                    status.innerText = "ğŸš€ SCENARIO 13: å®Œç¾ä¸»å‡æµª";
                    status.style.background = "var(--safe)"; status.style.color = "#000";
                    box.innerHTML = "<b style='color:var(--safe)'>å…±æŒ¯å¼€å¯ï¼š</b>ç¾å…ƒå¼±ã€åˆ©ç‡ä½ï¼Œ20+æŒ‡æ ‡å…±æŒ¯ã€‚ç›®æ ‡ Woodie R1 å‹åŠ›ä½ã€‚";
                } else {
                    status.innerText = "SCENARIO 05: éœ‡è¡è¿‡æ»¤ä¸­";
                    status.style.background = "var(--gold)"; status.style.color = "#000";
                    box.innerHTML = "<b>å®è§‚åŠ¨æ€ï¼š</b>ç›¸å…³ç³»æ•°çŸ©é˜µç¨³å®šã€‚å»ºè®®åœ¨ " + quant.s1.toFixed(1) + " å’Œ " + quant.r1.toFixed(1) + " ä¹‹é—´åš Woodie éœ‡è¡ã€‚";
                }

            } catch (e) { console.log("Data pulse sync..."); }
        }

        function bootFinalSystem() {
            quant.isActive = true;
            alert("å®™æ–¯ä¹‹ç›¾ V17.0 æ³¨å…¥æˆåŠŸï¼\n1. 50ç¾é‡‘å…³å£é¸£å“å¼€å¯\n2. æ”¯æ’‘/å‹åŠ›ä½ 1ç¾å…ƒèŒƒå›´å†…æŠ¥è­¦å¼€å¯\n3. å®é™…åˆ©ç‡æ­»å¾‹å·²å°±ç»ª");
            setInterval(quantEngine, 3000); quantEngine();
        }
    </script>
</body>
</html>
