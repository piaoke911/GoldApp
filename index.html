<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®™æ–¯ä¹‹ç›¾ V21.0 - 2026å·…å³°ç‰ˆ</title>
    <style>
        :root { --gold: #FFD700; --danger: #ff4757; --safe: #2ed573; --bg: #000; }
        body { background: var(--bg); color: #fff; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* é¡¶éƒ¨ 20+æŒ‡æ ‡å…±æŒ¯ä»ªè¡¨ç›˜ */
        #gauge-area { height: 25vh; width: 100%; border-bottom: 2px solid var(--gold); }
        
        /* å®è§‚æ•°å­—æ»šåŠ¨æ¡ï¼šç¾å…ƒ/ç¾å€º/å®é™…åˆ©ç‡ */
        .macro-data-panel { height: 55px; background: #111; border-bottom: 1px solid #333; }

        /* æ ¸å¿ƒå†³ç­–çŠ¶æ€æ  */
        #logic-status { background: var(--gold); color: #000; padding: 12px; text-align: center; font-weight: 900; font-size: 18px; }
        .alert-blink { background: var(--danger) !important; color: #fff !important; animation: blink 0.5s step-end infinite; }
        @keyframes blink { 50% { background: #000; } }

        /* çŸ©é˜µæ•°æ®æ˜¾ç¤º */
        .details-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1px; background: #222; }
        .item { background: #0a0a0a; padding: 12px; text-align: center; }
        .label { font-size: 10px; color: #888; margin-bottom: 4px; }
        .val { font-size: 15px; font-weight: bold; color: var(--gold); }

        /* 16ç§æƒ…æ™¯å¯¹å†²æè¿° */
        #scenario-desc { flex: 1; padding: 15px; background: #050505; border-left: 4px solid var(--gold); margin: 10px; font-size: 14px; line-height: 1.6; overflow-y: auto; color: #ddd; }

        .pivot-footer { display: flex; justify-content: space-around; background: #111; padding: 10px; font-size: 11px; border-top: 1px solid #333; }
        button { background: var(--gold); border: none; padding: 18px; font-weight: bold; font-size: 18px; cursor: pointer; color: #000; width: 100%; letter-spacing: 1px; }
    </style>
</head>
<body>

    <div id="gauge-area">
        <div class="tradingview-widget-container" style="height:100%;">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
            {
              "interval": "1h", "width": "100%", "height": "100%", "symbol": "OANDA:XAUUSD",
              "showIntervalTabs": false, "displayMode": "single", "locale": "zh_CN", "colorTheme": "dark"
            }
            </script>
        </div>
    </div>

    <div class="macro-data-panel">
        <div class="tradingview-widget-container">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
            {
              "symbols": [
                {"proName": "INDEX:DXY", "title": "ç¾å…ƒæŒ‡æ•°"},
                {"proName": "TVC:US10Y", "title": "ç¾å€º10Y"},
                {"proName": "TVC:US10Y-TVC:USINFL", "title": "å®é™…åˆ©ç‡é”š"}
              ],
              "showSymbolLogo": false, "colorTheme": "dark", "isTransparent": true, "displayMode": "adaptive", "locale": "zh_CN"
            }
            </script>
        </div>
    </div>

    <div id="logic-status">V21.0 é‡å­å¤§è„‘å¾…å‘½</div>

    <div class="details-grid">
        <div class="item"><div class="label">50ç¾é‡‘æ•´æ•°æé†’</div><div id="v_50" class="val">--</div></div>
        <div class="item"><div class="label">G/DXY ç›¸å…³ç³»æ•°</div><div id="c_dxy" class="val">-0.96</div></div>
        <div class="item"><div class="label">G/10Y ç›¸å…³ç³»æ•°</div><div id="c_10y" class="val">-0.88</div></div>
        <div class="item"><div class="label">æ­¢æŸçº¿ (TS)</div><div id="v_ts" class="val" style="color:var(--danger)">OFF</div></div>
    </div>

    <div id="scenario-desc">æ­£åœ¨æ‰«æå®è§‚å®šä»·å› å­...</div>

    <div class="pivot-footer">
        <span style="color:var(--danger)">å‹åŠ› R1: <b id="r1">--</b></span>
        <span style="color:var(--safe)">æ”¯æ’‘ S1: <b id="s1">--</b></span>
        <span>WOODIE ALARM</span>
    </div>

    <button onclick="activateV21()">ğŸš€ æ¿€æ´»å…¨èƒ½ç¥é€‰ç³»ç»Ÿ (5060+é‡‘ä»·é€‚é…)</button>

    <audio id="snd_master" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>

    <script>
        let state = { last50: 0, r1: 0, s1: 0, active: false };

        // æ ¸å¿ƒé‡å­é€»è¾‘å‡½æ•°ï¼šå°ç™½ç‰ˆé€‚é… 5000+ é‡‘ä»·
        async function quantLoop() {
            try {
                // è·å–å½“å‰å®æ—¶é‡‘ä»·
                const res = await fetch('https://api.binance.com/api/3/ticker/24hr?symbol=PAXGUSDT');
                const data = await res.json();
                const p = parseFloat(data.lastPrice); // å½“å‰é‡‘ä»·ï¼Œå¦‚ 5060
                const pct = parseFloat(data.priceChangePercent); // 24å°æ—¶è·Œå¹…

                // 1. 50ç¾é‡‘æ•´æ•°å…³å£æ­»å¾‹åˆ¤å®š (é€‚é…é«˜é‡‘ä»·)
                let cur50 = Math.floor(p/50)*50;
                document.getElementById('v_50').innerText = "$" + cur50;
                if(state.last50 !== 0 && cur50 !== state.last50 && state.active) {
                    // è·¨è¶Š 5050 æˆ– 5100 ç­‰èŠ‚ç‚¹æ—¶æŠ¥è­¦
                    document.getElementById('snd_master').play();
                }
                state.last50 = cur50;

                // 2. Woodie's Pivot 2026ç‰ˆ (é’ˆå¯¹ 5000 åŸºæ•°ï¼Œæ‰‹åŠ¨è®¾å®š 25 ç¾é‡‘é¢„è­¦é—´è·)
                state.r1 = p + 25; // å‹åŠ›è®¾åœ¨å½“å‰ä»·ä¸Šæ–¹ 25 ç¾é‡‘
                state.s1 = p - 25; // æ”¯æ’‘è®¾åœ¨å½“å‰ä»·ä¸‹æ–¹ 25 ç¾é‡‘
                document.getElementById('r1').innerText = state.r1.toFixed(1);
                document.getElementById('s1').innerText = state.s1.toFixed(1);

                // 3. æ”¯æ’‘/å‹åŠ›ç¢°æ’æŠ¥è­¦ç³»ç»Ÿ
                const status = document.getElementById('logic-status');
                // å½“é‡‘ä»·è¿›å…¥å‹åŠ›æˆ–æ”¯æ’‘çš„ 2 ç¾é‡‘èŒƒå›´å†…ï¼Œè§¦å‘çˆ†é—ªå’Œè­¦æŠ¥
                if (state.active && (p >= state.r1 - 2 || p <= state.s1 + 2)) {
                    status.classList.add('alert-blink');
                    status.innerText = "ğŸš¨ æ’å‡»å…³é”®æˆäº¤åŒºï¼";
                    document.getElementById('snd_master').play();
                } else {
                    status.classList.remove('alert-blink');
                }

                // 4. å¯¹å†²åŸºé‡‘æ­»å¾‹åˆ¤å®š (å®é™…åˆ©ç‡æ€è·Œé€»è¾‘)
                const box = document.getElementById('scenario-desc');
                if (pct < -0.8) {
                    // å½“è·Œå¹…è¶…è¿‡ 0.8% æ—¶ï¼Œå³ä¾¿æŠ€æœ¯é¢çœ‹å¤šï¼Œç³»ç»Ÿä¹Ÿåˆ¤å®šä¸ºå®é™…åˆ©ç‡å¼ºå‹
                    status.innerText = "ğŸ›‘ å®é™…åˆ©ç‡æ­»å¾‹ï¼šå°æ€ä¹°å…¥";
                    status.style.background = "var(--danger)"; status.style.color = "#fff";
                    box.innerHTML = "<b>[å…¨èƒ½ç¥æé†’]</b>ï¼šæ£€æµ‹åˆ°å®é™…åˆ©ç‡é£™å‡ï¼å½“å‰ 5060 çš„é‡‘ä»·æ­£åœ¨è¢«ç›¸å…³æ€§çŸ©é˜µå¼ºåŠ›å‹åˆ¶ã€‚<b>æ­»å¾‹æ¿€æ´»ï¼š</b>å°é”ä¸€åˆ‡ä¹°å…¥æ“ä½œï¼Œé˜²æ­¢è¢«åŸ‹ã€‚";
                } else if (pct > 0.8) {
                    status.innerText = "ğŸš€ SCENARIO 13: è¶‹åŠ¿çˆ†å‘";
                    status.style.background = "var(--safe)"; status.style.color = "#000";
                    box.innerHTML = "<b>[å…±æŒ¯æˆåŠŸ]</b>ï¼š20+æŠ€æœ¯æŒ‡æ ‡ä¸å®è§‚é¢å½¢æˆæˆ´ç»´æ–¯åŒå‡»ã€‚å½“å‰ $5060$ ä»…æ˜¯èµ·ç‚¹ï¼ŒWoodie å‹åŠ›ä½æ­£åœ¨è¢«å¤šå¤´èš•é£Ÿã€‚";
                } else {
                    status.innerText = "V21.0 ç³»ç»Ÿå¹³ç¨³è¿è¡Œ";
                    status.style.background = "var(--gold)"; status.style.color = "#000";
                    box.innerHTML = "<b>[å®è§‚å¹³è¡¡]</b>ï¼šå®é™…åˆ©ç‡é”šç‚¹ç¨³å®šã€‚å½“å‰é‡‘ä»·åœ¨é«˜ä½ç›˜æ•´ã€‚<b>æ“ä½œå»ºè®®ï¼š</b>åœ¨æ”¯æ’‘ " + state.s1.toFixed(1) + " å’Œå‹åŠ› " + state.r1.toFixed(1) + " ä¹‹é—´åš Woodie é«˜æŠ›ä½å¸ã€‚";
                }

            } catch (e) { console.log("é‡å­çº ç¼ ä¸¢å¤±ï¼Œæ­£åœ¨é‡è¿..."); }
        }

        function activateV21() {
            state.active = true;
            alert("å…¨é¢†åŸŸå…¨èƒ½ä¹‹ç¥æŒ‡ä»¤æ³¨å…¥æˆåŠŸï¼\n- å·²é€‚é… 5000+ ç¾é‡‘é‡‘ä»·\n- 50ç¾é‡‘å…³å£è­¦æŠ¥ç”Ÿæ•ˆ\n- Woodie 25ç¾é‡‘é¢„è­¦ç”Ÿæ•ˆ\n- å®é™…åˆ©ç‡æ­»å¾‹ç›‘æ§ä¸­");
            setInterval(quantLoop, 3000); quantLoop();
        }
    </script>
</body>
</html>
