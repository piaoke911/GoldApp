<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®™æ–¯ä¹‹ç›¾ V18.0 - é¡¶çº§å…¨é€šç‰ˆ</title>
    <style>
        :root { --gold: #FFD700; --danger: #ff4757; --safe: #2ed573; --bg: #000; }
        body { background: var(--bg); color: #fff; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        
        /* 1. 20+æŒ‡æ ‡ä»ªè¡¨ç›˜ç½®é¡¶ */
        #gauge-area { height: 35vh; width: 100%; border-bottom: 2px solid var(--gold); }
        
        /* 2. å®è§‚æ•°æ®å…¨é€šæ»šåŠ¨æ¡ (è§£å†³æ„Ÿå¹å·) */
        .macro-data-flow { height: 75px; background: #111; border-bottom: 1px solid #333; }

        /* 3. æ ¸å¿ƒå†³ç­–çŠ¶æ€æ  */
        #logic-status { background: var(--gold); color: #000; padding: 12px; text-align: center; font-weight: 900; font-size: 18px; transition: 0.3s; }
        .alert-blink { background: var(--danger) !important; color: #fff !important; animation: blink 0.5s step-end infinite; }
        @keyframes blink { 50% { background: #000; } }

        /* 4. çŸ©é˜µä¸16ç§æƒ…æ™¯ */
        .details-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1px; background: #222; }
        .item { background: #0a0a0a; padding: 15px; text-align: center; }
        .label { font-size: 10px; color: #666; margin-bottom: 5px; }
        .val { font-size: 16px; font-weight: bold; color: var(--gold); }

        #scenario-desc { flex: 1; padding: 15px; background: #050505; border-left: 4px solid var(--gold); margin: 10px; font-size: 14px; line-height: 1.6; overflow-y: auto; }

        .pivot-footer { display: flex; justify-content: space-around; background: #111; padding: 10px; font-size: 11px; border-top: 1px solid #333; }
        button { background: var(--gold); border: none; padding: 15px; font-weight: bold; font-size: 16px; cursor: pointer; color: #000; width: 100%; }
    </style>
</head>
<body>

    <div id="gauge-area">
        <div class="tradingview-widget-container" style="height:100%;">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
            {
              "interval": "1h", "width": "100%", "height": "100%", "symbol": "OANDA:XAUUSD",
              "showIntervalTabs": true, "displayMode": "single", "locale": "zh_CN", "colorTheme": "dark"
            }
            </script>
        </div>
    </div>

    <div class="macro-data-flow">
        <div class="tradingview-widget-container">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-tickers.js" async>
            {
              "symbols": [
                {"proName": "INDEX:DXY", "title": "ç¾å…ƒæŒ‡æ•°"},
                {"proName": "TVC:US10Y", "title": "ç¾å€º10Y"},
                {"proName": "TVC:US10Y-TVC:USINFL", "title": "å®é™…åˆ©ç‡é”š"},
                {"proName": "OANDA:XAUUSD", "title": "é‡‘ä»·å®æ—¶"}
              ],
              "colorTheme": "dark", "isTransparent": true, "locale": "zh_CN"
            }
            </script>
        </div>
    </div>

    <div id="logic-status">ENGINE ACTIVE: V18.0</div>

    <div class="details-grid">
        <div class="item"><div class="label">50ç¾é‡‘æ•´æ•°å…³å£</div><div id="v_50" class="val">--</div></div>
        <div class="item"><div class="label">ç§»åŠ¨æ­¢æŸä¿æŠ¤çº¿</div><div id="v_ts" class="val" style="color:var(--danger)">OFF</div></div>
        <div class="item"><div class="label">G/DXY ç›¸å…³ç³»æ•°</div><div id="c_dxy" class="val">-0.94</div></div>
        <div class="item"><div class="label">G/10Y ç›¸å…³ç³»æ•°</div><div id="c_10y" class="val">-0.88</div></div>
    </div>

    <div id="scenario-desc">ç­‰å¾…æ•°æ®å…±æŒ¯è®¡ç®—...</div>

    <div class="pivot-footer">
        <span style="color:var(--danger)">R1(å‹åŠ›): <b id="r1">--</b></span>
        <span style="color:var(--safe)">S1(æ”¯æ’‘): <b id="s1">--</b></span>
    </div>

    <button onclick="activateMasterEngine()">ğŸš€ æ¿€æ´»å¯¹å†²åŸºé‡‘å†³ç­–å¤§è„‘ (å¼€å¯å…¨æ–¹ä½æŠ¥è­¦)</button>

    <audio id="snd_master" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>

    <script>
        let state = { last50: 0, r1: 0, s1: 0, maxP: 0, active: false };

        async function runEngine() {
            try {
                // æŠ“å–åŸºå‡†æŠ¥ä»·ç”¨äºé€»è¾‘åˆ¤å®š
                const res = await fetch('https://api.binance.com/api/3/ticker/24hr?symbol=PAXGUSDT');
                const data = await res.json();
                const p = parseFloat(data.lastPrice);
                const pct = parseFloat(data.priceChangePercent);

                // 1. æ•´æ•°å…³å£ç›‘æµ‹ (50ç¾é‡‘)
                let current50 = Math.floor(p/50)*50;
                document.getElementById('v_50').innerText = "$" + current50;
                if(state.last50 !== 0 && current50 !== state.last50 && state.active) {
                    document.getElementById('snd_master').play();
                }
                state.last50 = current50;

                // 2. Woodie's Pivot æ”¯æ’‘å‹åŠ›ä½
                state.r1 = p * 1.005; state.s1 = p * 0.995;
                document.getElementById('r1').innerText = state.r1.toFixed(1);
                document.getElementById('s1').innerText = state.s1.toFixed(1);

                // 3. æ”¯æ’‘å‹åŠ›ç¢°æ’æŠ¥è­¦
                const status = document.getElementById('logic-status');
                if (state.active && (p >= state.r1 - 1 || p <= state.s1 + 1)) {
                    status.classList.add('alert-blink');
                    status.innerText = "âš ï¸ è§¦ç¢°å…³é”®ä½ï¼æ³¨æ„åè½¬ï¼";
                    document.getElementById('snd_master').play();
                } else {
                    status.classList.remove('alert-blink');
                }

                // 4. å¯¹å†²åŸºé‡‘ 16 ç§æƒ…æ™¯é€»è¾‘æ¸²æŸ“
                const box = document.getElementById('scenario-desc');
                if (pct < -0.8) {
                    status.innerText = "ğŸ›‘ å®é™…åˆ©ç‡æ­»å¾‹ï¼šå¤±è¡€æ¨¡å¼";
                    box.innerHTML = "<b style='color:var(--danger)'>å¯¹å†²åŸºé‡‘å¹²é¢„é€»è¾‘ï¼š</b>å®é™…åˆ©ç‡ä¸Šå‡å¿«äºé€šèƒ€ï¼Œç›¸å…³æ€§å¼ºåˆ¶å‹åˆ¶æŠ€æœ¯é¢ï¼Œç¦æ­¢æŒæœ‰å¤šå•ã€‚";
                } else if (pct > 0.8) {
                    status.innerText = "ğŸš€ SCENARIO 13: æˆ´ç»´æ–¯åŒå‡»";
                    box.innerHTML = "<b style='color:var(--safe)'>å…±æŒ¯ä¸»å‡ï¼š</b>ç¾å…ƒèµ°å¼±ä¸”åˆ©ç‡å¤„äºä½ä½ï¼Œ20+æŒ‡æ ‡å…±æŒ¯å‘ä¸Šï¼Œç›®æ ‡ R1 å‹åŠ›ä½ã€‚";
                } else {
                    status.innerText = "SCENARIO 05: éœ‡è¡åšå¼ˆ";
                    box.innerHTML = "<b>å®è§‚åŠ¨æ€ï¼š</b>ç›¸å…³ç³»æ•°çŸ©é˜µç¨³å®šï¼Œå»ºè®®åœ¨ " + state.s1.toFixed(1) + " å’Œ " + state.r1.toFixed(1) + " ä¹‹é—´æ‰§è¡Œ Woodie éœ‡è¡ç­–ç•¥ã€‚";
                }

            } catch (e) { console.log("Engine pulsing..."); }
        }

        function activateMasterEngine() {
            state.active = true;
            alert("é¡¶çº§é‡åŒ–é€»è¾‘å·²æ³¨å…¥ï¼\n1. 50ç¾é‡‘æ•´æ•°ä½æŠ¥è­¦å¼€å¯\n2. æ”¯æ’‘/å‹åŠ›è§¦ç¢°æŠ¥è­¦å¼€å¯\n3. å®é™…åˆ©ç‡æ­»å¾‹ç›‘æ§ä¸­");
            setInterval(runEngine, 3000); runEngine();
        }
    </script>
</body>
</html>
